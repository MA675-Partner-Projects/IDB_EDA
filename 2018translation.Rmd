---
title: "2018translation"
author: "Yuchen Huang"
date: "2023-10-29"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Read Data
```{r}
library(tidyverse)
ZZ18 <- read.csv("perfil_eleitor_secao_2018_ZZ.csv", sep = ";")
#glimpse(ZZ18)
```

## Column Names

```{r}
col_name <- colnames(ZZ18)
colnames(ZZ18) <- c(
    "GENERATION_DATE",       # "DT_GERACAO"
    "GENERATION_TIME",       # "HH_GERACAO"
    "ELECTION_YEAR",         # "ANO_ELEICAO"
    "STATE_CODE",            # "SG_UF"
    "CITY_CODE",             # "CD_MUNICIPIO"
    "CITY_NAME",             # "NM_MUNICIPIO"
    "CITY_BIOMETRIC_CODE",   # "CD_MUN_SIT_BIOMETRICA"
    "CITY_BIOMETRIC_STATUS", # "DS_MUN_SIT_BIOMETRICA"
    "ZONE_NUMBER",           # "NR_ZONA"
    "SECTION_NUMBER",        # "NR_SECAO"
    "VOTING_PLACE_NUMBER",   # "NR_LOCAL_VOTACAO"
    "GENDER_CODE",           # "CD_GENERO"
    "GENDER",                # "DS_GENERO"
    "MARITAL_STATUS_CODE",   # "CD_ESTADO_CIVIL"
    "MARITAL_STATUS",        # "DS_ESTADO_CIVIL"
    "AGE_GROUP_CODE",        # "CD_FAIXA_ETARIA"
    "AGE_GROUP",             # "DS_FAIXA_ETARIA"
    "EDUCATION_LEVEL_CODE",  # "CD_GRAU_ESCOLARIDADE"
    "EDUCATION_LEVEL",       # "DS_GRAU_ESCOLARIDADE"
    "NUMBER_OF_VOTERS_PROFILE",   # "QT_ELEITORES_PERFIL"
    "NUMBER_OF_BIOMETRIC_VOTERS", # "QT_ELEITORES_BIOMETRIA"
    "NUMBER_OF_VOTERS_WITH_DISABILITIES", # "QT_ELEITORES_DEFICIENCIA"
    "NUMBER_OF_VOTERS_WITH_SOCIAL_NAME"  # "QT_ELEITORES_INC_NM_SOCIAL"
    )
```

## City Name

```{r}
city_name <- unique(ZZ18$CITY_NAME)
city_name_t <- c(
  "ROMA" = "ROME",
  "LONDRES" = "LONDON",
  "LOS ANGELES" = "LOS ANGELES", 
  # "ROTTERD\xc3" 
  "ROTTERD\xc3" = "ROTTERDAM", 
  "LUANDA" = "LUANDA", 
  "MADRI" = "MADRID",
  "SALTO DEL GUAIR\xc1" = "SALTO DEL GUAIRA",  
  "STA C LA SIERRA-BOLI" = "SANTA CRUZ DE LA SIERRA", 
  "SANTIAGO" = "SANTIAGO", 
  "S\xc3O DOMINGOS" = "Santo DOMINGOS", #Not sure
  "S\xc3O FRANCISCO" = "SAN FRANCISCO", #Not sure
  "MAN\xc1GUA" = "MANAGUA",
  "MANILA" = "MANILA", 
  "MAPUTO" = "MAPUTO", 
  "S\xc3O JOS\xc9" = "SAN JOSE", 
  "S\xc3O SALVADOR" = "SAN SALVADOR",
  
  "SEUL" = "SEOUL",
  "M\xc9XICO-MEXI" = "MEXICO CITY",
  "SYDNEY" = "SYDNEY",
  "S\xd3FIA" = "SOFIA",
  "MIAMI" = "MIAMI",
  "TAIP\xc9" = "TAIPEI",
  "TEER\xc3" = "TEHRAN",
  "TEGUCIGALPA" = "TEGUCIGALPA",
  "TEL AVIV" = "TEL AVIV",
  "T\xd3QUIO" = "TOKYO",
  "MIL\xc3O" = "MILAN",
  "TORONTO" = "TORONTO",
  "CANT\xc3O" = "GUANGZHOU",
  "TR\xcdPOLI" = "TRIPOLI",
  "TUNIS" = "TUNIS",
  "VARS\xd3VIA" = "WARSAW",
  "VIENA" = "VIENNA",
  "WASHINGTON" = "WASHINGTON",
  "MONTEVID\xc9U" = "MONTEVIDEO",
  "MONTREAL" = "MONTREAL",
  "MOSCOU" = "MOSCOW",
  "MUMBAI" = "MUMBAI",
  "MUNIQUE" = "MUNICH",
  "WELLINGTON" = "WELLINGTON",
  "WINDHOEK" = "WINDHOEK",
  "XANGAI" = "SHANGHAI",
  "ZURIQUE" = "ZURICH",
  "NAG\xd3IA" = "NAGOYA",
  "HARTFORD" = "HARTFORD",
  "FARO" = "FARO",
  "BELMOPAN" = "BELMOPAN",
  "DAR ES SALAAM" = "DAR ES SALAAM",
  "IEREVAN-ARME" = "YEREVAN",
  "MENDOZA" = "MENDOZA",
  "VANCOUVER" = "VANCOUVER",
  "ATLANTA" = "ATLANTA",
  "NAIR\xd3BI" = "NAIROBI",
  "NOVA DELHI" = "NEW DELHI",
  "NOVA YORK" = "NEW YORK",
  "MASCATE" = "MUSCAT",
  "LIUBLIANA" = "LJUBLJANA",
  "BRATISLAVA" = "BRATISLAVA",
  "S\xc3O TOM\xc9" = "Saint Thomas",
  "ASTANA" = "ASTANA",  
  "MALABO" = "MALABO",
  "ISTAMBUL" = "ISTANBUL",
  "NICOSIA" = "NICOSIA",
  "GUATEMALA" = "GUATEMALA CITY",
  
  "TBILISI" = "TBILISI",
  "PUERTO IGUAZ\xda" = "PUERTO IGUAZU",
  "NASSAU" = "NASSAU",
  "LUSACA" = "LUSAKA",
  "TALIN" = "TALLINN",
  "YANGON" = "YANGON",
  "FREETOWN" = "FREETOWN",
  "KINGSTON-JAMAICA" = "KINGSTON",
  "OSLO" = "OSLO",
  "OTTAWA" = "OTTAWA",
  "PANAM\xc1-PAN" = "PANAMA CITY",
  "PARAMARIBO" = "PARAMARIBO",
  "PARIS" = "PARIS",
  "PASO LOS LIBRES" = "PASO DE LOS LIBRES",
  "PEDRO JUAN CABALLERO" = "PEDRO JUAN CABALLERO",
  "PEQUIM" = "BEIJING",
  "PORT OF SPAIN" = "PORT OF SPAIN",
  "PORTO PR\xcdNCIPE" = "PORT-AU-PRINCE",
  "PORTO" = "PORTO",
  "PRAGA" = "PRAGUE",
  "PRAIA" = "PRAIA",
  "PRET\xd3RIA" = "PRETORIA",
  "QUITO" = "QUITO",
  "RABAT" = "RABAT",
  "RAMALLAH-PALE" = "RAMALLAH",
  "RIADE" = "RIYADH",
  "RIO BRANCO" = "RIO BRANCO",
  "COLOMBO" = "COLOMBO",
  "SARAJEVO" = "SARAJEVO",
  "COTONOU" = "COTONOU",
  "ZAGREB" = "ZAGREB",
  "BRAZZAVILLE" = "BRAZZAVILLE",
  "LILONGUE" = "LILONGWE",
  "KATMANDU" = "KATHMANDU",
  "ABIDJ\xc3" = "ABIDJAN",
  "ABU DHABI" = "ABU DHABI",
  
  "ACCRA-GANA" = "ACCRA",
  "AM\xc3" = "AMMAN",
  "ANCARA" = "ANKARA",
  "ARGEL" = "ALGIERS",
  "ARTIGAS" = "ARTIGAS",
  "ASSUN\xc7\xc3O" = "ASUNCION",
  "ATENAS" = "ATHENS",
  "BANGKOK" = "BANGKOK",
  "BARCELONA" = "BARCELONA",
  "BEIRUTE" = "BEIRUT",
  "BELGRADO" = "BELGRADE",
  "BERLIM" = "BERLIN",
  "BISSAU" = "BISSAU",
  "BOGOT\xc1" = "BOGOTA",
  "BOSTON" = "BOSTON",
  "BRIDGETOWN" = "BRIDGETOWN",
  "BRUXELAS" = "BRUSSELS",
  "BUCARESTE" = "BUCHAREST",
  "BUDAPESTE" = "BUDAPEST",
  "BUENOS AIRES" = "BUENOS AIRES",
  "CAIENA" = "CAYENNE",
  "CAIRO" = "CAIRO",
  "CAMBERRA" = "CAMBERRA",
  "CARACAS" = "CARACAS",
  "CHICAGO" = "CHICAGO",
  "CHUY" = "CHUY",
  "CIDADE DO CABO" = "CAPE TOWN",
  "SINGAPURA-SING" = "SINGAPORE",
  "CIUDAD DEL ESTE" = "CIUDAD DEL ESTE",
  "CIUDAD GUAYANA" = "CIUDAD GUAYANA",
  "COCHABAMBA" = "COCHABAMBA",
  "CONCEPCI\xd3N" = "CONCEPCION",
  "COPENHAGUE-DINA" = "COPENHAGEN",
  "C\xd3RDOBA" = "CORDOBA",
  "DACAR" = "DAKAR",
  "DAMASCO" = "DAMASCUS",
  "D\xcdLI" = "DELHI",
  "DOHA" = "DOHA",
  "DUBLIN" = "DUBLIN",
  "ENCARNACI\xd3N" = "ENCARNACION",
  "ESTOCOLMO" = "STOCKHOLM",
  "FRANKFURT" = "FRANKFURT",
  "GENEBRA" = "GENEVA",
  "GEORGETOWN" = "GEORGETOWN",
  "HAMAMATSU" = "HAMAMATSU",
  "HAN\xd3I" = "HANOI",
  "HARARE" = "HARARE",
  "HAVANA" = "HAVANA",
  "HELSINQUE" = "HELSINKI",
  "HONG KONG-HONG" = "HONG KONG",
  "HOUSTON" = "HOUSTON",

  "IAUND\xca" = "YAOUNDE", #Not sure
  "IQUITOS" = "IQUITOS",
  "ISLAMABADE" = "ISLAMABAD",
  "JACARTA" = "JAKARTA",
  "KIEV" = "KIEV",
  "KINSHASA" = "KINSHASA",
  "KUAITE" = "KUWAIT CITY",
  "KUALA LUMPUR" = "KUALA LUMPUR",
  "LA PAZ" = "LA PAZ",
  "LAGOS" = "LAGOS",
  "LIBREVILLE" = "LIBREVILLE",
  "LIMA" = "LIMA",
  "LISBOA" = "LISBON",
  "LOM\xc9" = "LOME",
  "GABORONE" = "GABORONE",
  "CONACRI" = "CONAKRY",
  "UAGADUGU" = "OUAGADOUGOU",
  "PUERTO QUIJARRO" = "PUERTO QUIJARRO",
  "BAMAKO" = "BAMAKO",
  "LETHEM" = "LETHEM"
)

# Translating city names
ZZ18$CITY_NAME <- ifelse(ZZ18$CITY_NAME %in% names(city_name_t),
                         city_name_t[ZZ18$CITY_NAME],
                         ZZ18$CITY_NAME)
```

## Country Name
```{r}
city_country <- readxl::read_xlsx("City_Country.xlsx")

ZZ18 <- ZZ18 |>
  left_join(select(city_country, -CITY_NAME), by = "CITY_CODE")
```


## City Biometric status

```{r}
unique(ZZ18$CITY_BIOMETRIC_STATUS)
ZZ18$CITY_BIOMETRIC_STATUS <- "Without biometrics"
```

## Gender

```{r}
unique(ZZ18$GENDER)
ZZ18$GENDER <- ifelse(ZZ18$GENDER == "MASCULINO", "male", "female")
```

## Marital Status

```{r}
unique(ZZ18$MARITAL_STATUS)
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "SOLTEIRO"] <- "SINGLE"
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "CASADO"] <- "MARRIED"
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "DIVORCIADO"] <- "DIVORCED"
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "VI\xdaVO"] <- "WIDOWED"
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "SEPARADO JUDICIALMENTE"] <- "LEGALLY SEPARATED"
ZZ18$MARITAL_STATUS[ZZ18$MARITAL_STATUS == "N\xc3O INFORMADO"] <- "NOT INFORMED"
```

## Education Level

```{r}
unique(ZZ18$EDUCATION_LEVEL)
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "ENSINO M\xc9DIO INCOMPLETO"] <- "INCOMPLETE HIGH SCHOOL"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "ENSINO M\xc9DIO COMPLETO"] <- "HIGH SCHOOL GRADUATE"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "SUPERIOR INCOMPLETO"] <- "INCOMPLETE COLLEGE/UNIVERSITY"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "SUPERIOR COMPLETO"] <- "COLLEGE/UNIVERSITY GRADUATE"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "ENSINO FUNDAMENTAL COMPLETO"] <- "COMPLETE ELEMENTARY EDUCATION"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "ENSINO FUNDAMENTAL INCOMPLETO"] <- "INCOMPLETE ELEMENTARY EDUCATION"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "L\xca E ESCREVE"] <- "LITERATE (CAN READ AND WRITE)"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "ANALFABETO"] <- "ILLITERATE"
ZZ18$EDUCATION_LEVEL[ZZ18$EDUCATION_LEVEL == "N\xc3O INFORMADO" ] <- "NOT INFORMED"

```

## Age Group

```{r}
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "21 a 24 anos                  "] <- "21-24"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "25 a 29 anos                  "] <- "25-29"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "30 a 34 anos                  "] <- "30-34"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "35 a 39 anos                  "] <- "35-39"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "40 a 44 anos                  "] <- "40-44"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "65 a 69 anos                  "] <- "65-69"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "50 a 54 anos                  "] <- "50-54"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "55 a 59 anos                  "] <- "55-59"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "75 a 79 anos                  "] <- "75-79"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "60 a 64 anos                  "] <- "60-64"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "70 a 74 anos                  "] <- "70-74"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "20 anos                       "] <- "20"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "45 a 49 anos                  "] <- "45-49"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "16 anos                       "] <- "16"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "18 anos                       "] <- "18"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "19 anos                       "] <- "19"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "90 a 94 anos                  "] <- "90-94"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "85 a 89 anos                  "] <- "85-89"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "19 anos                       "] <- "19"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "17 anos                       "] <- "17"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "80 a 84 anos                  "] <- "80-84"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "100 anos ou mais              "] <- "100+"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "95 a 99 anos                  "] <- "95-99"
ZZ18$AGE_GROUP[ZZ18$AGE_GROUP == "Inv\xe1lido                      "] <- "Invalid"
```

## write csv

```{r}
write.csv(ZZ18, file = "translated_ZZ18.csv", row.names = FALSE)
```


